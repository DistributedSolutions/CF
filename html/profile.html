<div class="container-fluid">
	<div class="page-header">
		<h1>Profile <small>{{username}}</small></h1>
	</div>
	<!-- Profile Channels -->
	<div ng-hide="profile.channels.length == 0">
		<p>
			No Channels Found.
		</p>
		<hr ng-hide="!showSelectedChannel" />
	</div>
	<div ng-hide="profile.channels.length != 0">
		<div class="row">
			<div class="col-sm-10">
				<div class="table-responsive">
					<table class="table table-striped table-hover table-condensed">
						<thead>
							<tr>
								<th width="100%">Channel Name</th>
							</tr>
						</thead>
					</table>
					<div class="bodycontainer scrollable">
						<table class="table table-hover table-striped table-condensed table-scrollable">
							<tbody>
								<tr ng-repeat="x in profile.channels" ng-click="selectProfile($index)">
									<td width="100%">{{ x.name }}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<hr />
	</div>
	<div ng-show="showSelectedChannel">
		<ul class="nav nav-tabs">
			<li role="presentation" ng-class="tab == 0 ? 'active' : ''" style="cursor: pointer;">
				<a ng-click="tab = 0">Edit</a>
			</li>
			<li role="presentation" ng-class="tab == 1 ? 'active' : ''" style="cursor: pointer;">
				<a ng-click="tab = 1">Preview</a>
			</li>
			<li role="information" ng-class="tab == 2 ? 'active' : ''" style="cursor: pointer;">
				<a ng-click="tab = 2">Information</a>
			</li>
		</ul>
		<div class="panel panel-default buffer-top" ng-show="tab == 0">
			<div class="panel-heading">
				<div class="panel-title">
					<h3 style="display:inline-block;">Channel Information</h3>
					<button class="pull-right btn" ng-click="showChannelInformation = !showChannelInformation" style="margin-top:20px;" type="button">
						<span ng-hide="showChannelInformation" class="glyphicon glyphicon-menu-down"></span>
						<span ng-hide="!showChannelInformation" class="glyphicon glyphicon-menu-up"></span>
					</button>
				</div>
			</div>
			<div class="panel-body" ng-show="showChannelInformation" ng-init="showChannelInformation = true">
				<form ng-submit="applyChannel()">
					<div class="form-group">
						<label for="title">Title:</label>
						<!-- Cannot update channel title after created -->
						<input class="form-control" type="text" id="title" ng-model="channelCopy.title" ng-disabled="!showCreateChannel">
					</div>
					<div class="form-group">
						<label for="site">Site:</label>
						<input class="form-control" type="text" id="site" ng-model="channelCopy.site">
					</div>
					<div class="form-group">
						<label for="longdesc">Long Description:</label>
						<input class="form-control" type="text" id="longdesc" ng-model="channelCopy.longdesc">
					</div>
					<div class="form-group">
						<label for="shortdesc">Short Description:</label>
						<input class="form-control" type="text" id="shortdesc" ng-model="channelCopy.shortdesc">
					</div>
					<div class="form-group">
						<label for="playlist">Playlist:</label>
						<p ng-show="channelCopy.playlist.playlists.length == 0">
							No Playlists Set
						</p>
						<ul class="list-group" id="playlist">
							<li class="list-group-item" ng-repeat="p in channelCopy.playlist.playlists">
								<div class="row">
									<div class="col-sm-2">
										<p>
											{{p.title}}
										</p>
									</div>
									<div class="col-sm-2">
										<button class="btn btn-md btn-danger" ng-click="removePlaylist($index)" type="button">
											Remove Playlist
										</button>
									</div>
									<div class="col-sm-5">
										<input id="newPlaylistItemHash{{$index}}" type="text" class="form-control" placeholder="Content hash..." style="display:inline-block;">
									</div>
									<div class="col-sm-3">
										<button class="btn btn-md btn-success" ng-click="addPlaylistItem($index)" type="button">
											Add Content Hash to Playlist
										</button>
									</div>
								</div>
								<div class="row buffer-top" ng-hide="p.playlist.length == 0">
									<div class="col-sm-8">
										<ul class="list-group">
											<li class="list-group-item" ng-repeat="hash in p.playlist track by $index">
												<div class="row buffer">
													<div class="col-sm-6">
														<p>
															{{hash}}
														</p>
													</div>
													<div class="col-sm-2">
														<button class="btn btn-sm btn-danger" ng-click="removePlaylistItem($parent.$index,$index)" type="button">
															Remove Playlist
														</button>
													</div>
												</div>
											</li>
										</ul>
									</div>
								</div>
							</li>
						</ul>
						<div class="row">
							<div class="col-sm-8">
								<input ng-model="newPlaylistName" type="text" class="form-control" placeholder="Playlist name...">
							</div>
							<div class="col-sm-2">
								<button class="btn btn-default" ng-click="addPlaylist()" type="button">
									Add New Playlist
								</button>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="thumbnail">Thumbnail:</label>
						<br>
						<label class="btn btn-default btn-file" id="thumbnail">
							Add Thumbnail <input type="file" hidden accept="image/*" onchange="angular.element(this).scope().addChannelThumbnail(this)">
						</label>
					</div>
					<div class="form-group">
						<label for="banner">Banner:</label>
						<br>
						<label class="btn btn-default btn-file" id="banner">
							Add Banner <input type="file" hidden accept="image/*" id="file" onchange="angular.element(this).scope().addChannelBanner(this)">
						</label>
					</div>
					<div class="form-group">
						<label for="suggestedchannels">Suggested Channels:</label>
						<p ng-show="channelCopy.suggestedchannels.hashlist == 0">
							No Suggested Channels Set
						</p>
						<ul class="list-group" id="suggestedchannels">
							<li class="list-group-item" ng-repeat="s in channelCopy.suggestedchannels.hashlist track by $index">
								<div class="row">
									<div class="col-sm-2">
										<p>
											{{s}}
										</p>
									</div>
									<div class="col-sm-2">
										<button class="btn btn-sm btn-danger" ng-click="removeSuggestedChannel($index)" type="button">
											Remove Suggested Channel
										</button>
									</div>
								</div>
							</li>
						</ul>
						<div class="row">
							<div class="col-sm-8">
								<input ng-model="newSuggestedChannelHash" type="text" class="form-control" placeholder="Channel hash...">
							</div>
							<div class="col-sm-2">
								<button class="btn btn-default" ng-click="addSuggestedChannel()" type="button">
									Add Suggested Channel
								</button>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="contentlist">Content List:</label>
						<p ng-show="channelCopy.contentlist.contentlist == 0">
							No Content Added
						</p>
						<div class="panel panel-default buffer-top" ng-repeat="content in channelCopy.contentlist.contentlist track by $index">
							<div class="panel-heading">
								<div class="panel-title">
									<h3 style="display:inline-block;">Content Information: {{content.title}}</h3>
									<button class="pull-right btn" ng-click="showEditContent[$index] = !showEditContent[$index]" style="margin-top:20px;" type="button">
										<span ng-hide="showEditContent[$index]" class="glyphicon glyphicon-menu-down"></span>
										<span ng-hide="!showEditContent[$index]" class="glyphicon glyphicon-menu-up"></span>
									</button>
								</div>
							</div>
							<div class="panel-body" ng-show="showEditContent[$index]">
								<div class="form-group">
									<label for="title">Title:</label>
									<input class="form-control" type="text" id="title" ng-model="content.title">
								</div>
								<div class="form-group">
									<label for="longdesc">Long Description:</label>
									<input class="form-control" type="text" id="longdesc" ng-model="content.longdesc">
								</div>
								<div class="form-group">
									<label for="shortdesc">Short Description:</label>
									<input class="form-control" type="text" id="shortdesc" ng-model="content.shortdesc">
								</div>
								<div class="form-group">
									<label for="thumbnail">Thumbnail:</label>
									<br>
									<label class="btn btn-default btn-file" id="thumbnail" ng-model="content.thumbnail">
										Add Thumbnail
										<input id="contentThumbnail{{$index}}" type="file" index="{{$index}}" custom-on-change="addContentThumbnail" accept="image/*" hidden/>
									</label>
								</div>
								<div class="form-group">
									<label for="series">Series:</label>
									<input class="form-control" type="number" id="series" ng-model="content.series">
								</div>
								<div class="form-group">
									<label for="part">Part:</label>
									<input class="form-control" type="number" id="part" ng-model="content.part">
								</div>
								<div class="form-group">
									<label for="tags">Tags:</label>
									<input class="form-control" type="text" id="tags" ng-model="content.tags">
								</div>
								<div class="form-group">
									<label for="filelist">File list:</label>
									<!-- <input class="form-control" type="text" id="filelist" ng-model="content.filelist"> -->
									<div ng-hide="channelCopy.contentlist.contentlist[$index].filelist == null">
										<div class="table-responsive">
											<table class="table table-striped table-hover table-condensed" style="margin-bottom:0px;">
												<thead>
													<tr>
														<th width="50%">File Name</th>
														<th width="20%">File Size</th>
														<th width="15%">File Checksum</th>
														<th width="35%"></th>
													</tr>
												</thead>
											</table>
											<div class="bodycontainer scrollable">
												<table class="table table-hover table-striped table-condensed table-scrollable">
													<tbody>
														<tr ng-repeat="x in channelCopy.contentlist.contentlist[$index].filelist.filelist">
															<td width="50%">{{ x.file }}</td>
															<td width="20%">{{ x.size }}</td>
															<td width="15%">{{ x.checksum }}</td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>
										<button class="btn btn-sm btn-danger buffer-top" ng-click="removeDir($index)" type="button">
											Remove Folder
										</button>
									</div>
									<div ng-hide="channelCopy.contentlist.contentlist[$index].filelist != null">
										<p>
											No Files Added to Content
										</p>
										<label for="dir">Add Folder With Files to Upload:</label>
										<br>
										<label class="btn btn-default btn-file" id="dir">
											<input id="contentFileList{{$index}}" type="file" index="{{$index}}" custom-on-change="addDir" hidden webkitdirectory directory multiple/>
										</label>
									</div>
								</div>
								<hr />
								<button class="btn btn-danger pull-right" ng-click="removeContent($index)" type="button">
									Remove Content
								</button>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-8">
								<input ng-model="newContentName" type="text" class="form-control" placeholder="Content name...">
							</div>
							<div class="col-sm-2">
								<button class="btn btn-default" ng-click="addContent()" type="button">
									Add New Content
								</button>
							</div>
						</div>
					</div>
					<hr />
					<button ng-if="showCreateChannel" type="submit" class="btn btn-success">Create New Channel :) YAY!</button>
					<button ng-if="!showCreateChannel" type="submit" class="btn btn-success">Update Channel :) YAY!</button>
				</form>
			</div>
		</div>
		<div ng-show="tab == 1">
			<!-- Channel Page Preview -->
			<div class="panel panel-default buffer-top">
				<div class="panel-heading">
					<div class="panel-title">
						<h3 style="display:inline-block;">Channel Page Preview</h3>
						<button class="pull-right btn" ng-click="showChannelPreview = !showChannelPreview" style="margin-top:20px;">
							<span ng-hide="showChannelPreview" class="glyphicon glyphicon-menu-down"></span>
							<span ng-hide="!showChannelPreview" class="glyphicon glyphicon-menu-up"></span>
						</button>
					</div>
				</div>
				<div class="panel-body" ng-show="showChannelPreview" ng-init="showChannelPreview = true">
					<channel-preview channel="channelCopy"></channel-preview>
				</div>
			</div>
			<!-- Contents Page Preview -->
			<div class="panel panel-default buffer-top" ng-repeat="content in channelCopy.contentlist.contentlist track by $index">
				<div class="panel-heading">
					<div class="panel-title">
						<h3 style="display:inline-block;">Content Information: {{content.title}}</h3>
						<button class="pull-right btn" ng-click="showPreviewContent[$index] = !showPreviewContent[$index]" style="margin-top:20px;">
							<span ng-hide="showPreviewContent[$index]" class="glyphicon glyphicon-menu-down"></span>
							<span ng-hide="!showPreviewContent[$index]" class="glyphicon glyphicon-menu-up"></span>
						</button>
					</div>
				</div>
				<div class="panel-body" ng-show="showPreviewContent[$index]" ng-init="showPreviewContent[$index] = true">
					<content-preview content="content"></content-preview>
				</div>
			</div>
		</div>
		<div class="panel panel-default buffer-top" ng-show="tab == 2">
			<div class="panel-heading">

				<h3 class="panel-title">Channel Block Information</h3>
			</div>
			<div class="panel-body">
				<p class="panelDesc">
					Root Chain ID: {{chanchannelCopynel.rootchain}}
				</p>
				<hr />
				<p class="panelDesc">
					Management Chain ID: {{channelCopy.managechain}}
				</p>
				<p class="panelDesc">
					Management Chain ID: {{channelCopy.contentchain}}
				</p>
				<p class="panelDesc">
					Content Chain ID: {{channelCopy.contentchain}}
				</p>
				<p class="panelDesc">
					LV1 Public Key: {{channelCopy.pubkey1}}
				</p>
				<p class="panelDesc">
					LV2 Public Key: {{channelCopy.pubkey2}}
				</p>
				<p class="panelDesc">
					LV3 Public Key: {{channelCopy.pubkey3}}
				</p>
				<p class="panelDesc">
					Content Signing Key: {{channelCopy.contentkey}}
				</p>
			</div>
		</div>
	</div>
	<hr />
	<div class="row">
		<div class="col-sm-2">
			<button ng-click="createNewChannel();" class="btn btn-default" type="button" >
				Create New Channel
			</button>
		</div>
		<div class="col-sm-4">
			<button class="btn btn-default" type="button" data-toggle="modal" data-target="#existingChannelModal" data-whatever="@mdo"
			ng-click="addExistingChannel()">
				Add Existing Channel
			</button>
		</div>
	</div>
</div>


<!-- Modal -->
<div class="modal fade" id="existingChannelModal" tabindex="-1" role="dialog" aria-labelledby="existingChannelModalLabel" aria-hidden="true" data-backdrop="static">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h3 class="modal-title" id="existingChannelModalLabel" style="display:inline-block;">Add Existing Channel </h3>
		<!-- 			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true" class="pull-right" style="margin-top:20px;">&times;</span>
					</button> -->
			</div>
			<div class="modal-body">
				<form>
					<div class="form-group">
						<label for="modal-hash" class="form-control-label">Channel Hash:</label>
						<input type="text" class="form-control" id="modal-hash" ng-model="modalHash">
					</div>
					<div class="form-group">
						<label for="modal-hash-key" class="form-control-label">Channel Private Key:</label>
						<input type="text" class="form-control" id="modal-hash-key" ng-model="modalHashKey" placeholder="Required for secure channels...">
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" ng-show="modalExistingVerifiedChannel" ng-click="verifyExistingChannel()">Verify Channel</button>
				<button type="button" class="btn btn-default" ng-show="modalExistingAddChannel" ng-click="addVerifiedExistingChannel()">Add Channel</button>
				<button type="button" class="btn btn-secondary" data-dismiss="modal" ng-disabled="modalDisableClose">Close</button>
			</div>
		</div>
	</div>
</div>